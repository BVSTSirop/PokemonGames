<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pokémon Trivia</title>
  <meta name="theme-color" content="#ffcc01">
  <meta name="description" content="Guess the Pokémon from a cropped sprite. Powered by PokeAPI.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Luckiest+Guy&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <span class="pokeball" aria-hidden="true">⚪️</span>
        <h1><span class="accent">Pokémon</span> Trivia</h1>
      </div>
      <button class="menu-toggle" id="menu-toggle" aria-label="Open menu" data-i18n="aria.menu.open" data-i18n-attr="aria-label" aria-controls="mobile-menu" aria-expanded="false">☰</button>
      <div class="mobile-menu" id="mobile-menu">
        <nav class="site-nav" aria-label="Primary">
          <a href="/" {% if active_page=='guess' %}aria-current="page"{% endif %} data-i18n="nav.guess">Sprite</a>
          <a href="/silhouette" {% if active_page=='silhouette' %}aria-current="page"{% endif %} data-i18n="nav.silhouette">Silhouette</a>
          <a href="/pixelate" {% if active_page=='pixelate' %}aria-current="page"{% endif %} data-i18n="nav.pixelate">Pixelate</a>
          <a href="/scream" {% if active_page=='scream' %}aria-current="page"{% endif %} data-i18n="nav.scream">Scream</a>
          <a href="/tcg" {% if active_page=='tcg' %}aria-current="page"{% endif %} data-i18n="nav.cards">Cards</a>
          <a href="/pokedex" {% if active_page=='pokedex' %}aria-current="page"{% endif %} data-i18n="nav.pokedex">Pokedex</a>
          <a href="/daily" {% if active_page=='daily' %}aria-current="page"{% endif %} data-i18n="nav.daily">Daily</a>
        </nav>
        <div class="lang-switcher">
          <label for="lang-select" class="visually-hidden" data-i18n="lang.label">Language</label>
          <select id="lang-select" class="lang-select" aria-label="Language">
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
          </select>
          <div class="gen-dropdown" id="gen-dropdown" aria-label="Generation selector">
            <button class="gen-toggle" id="gen-dropdown-toggle" type="button" aria-haspopup="true" aria-expanded="false" title="Select generations" 
              {% if active_page=='daily' %}disabled aria-disabled="true" data-i18n="gen.disabledHint" data-i18n-attr="title"{% else %}data-i18n="gen.select.title" data-i18n-attr="title"{% endif %}>
              <span class="gen-label" data-i18n="gen.label.all">All Generations</span>
              <span class="gen-caret" aria-hidden="true">▾</span>
            </button>
            <div class="gen-menu" id="gen-dropdown-menu" role="menu" aria-label="Generations" data-i18n="gen.menu.label" data-i18n-attr="aria-label">
              <label class="gen-option"><input type="checkbox" value="all" checked> <span data-i18n="gen.label.all">All Generations</span></label>
              <label class="gen-option"><input type="checkbox" value="1"> Gen 1</label>
              <label class="gen-option"><input type="checkbox" value="2"> Gen 2</label>
              <label class="gen-option"><input type="checkbox" value="3"> Gen 3</label>
              <label class="gen-option"><input type="checkbox" value="4"> Gen 4</label>
              <label class="gen-option"><input type="checkbox" value="5"> Gen 5</label>
              <label class="gen-option"><input type="checkbox" value="6"> Gen 6</label>
              <label class="gen-option"><input type="checkbox" value="7"> Gen 7</label>
              <label class="gen-option"><input type="checkbox" value="8"> Gen 8</label>
              <label class="gen-option"><input type="checkbox" value="9"> Gen 9</label>
            </div>
          </div>
          <!-- Hidden select maintained for compatibility with existing JS logic -->
          <label for="gen-select" class="visually-hidden">Generation</label>
          <select id="gen-select" aria-label="Generation" multiple style="display:none">
            <option value="all">All Generations</option>
            <option value="1">Gen 1</option>
            <option value="2">Gen 2</option>
            <option value="3">Gen 3</option>
            <option value="4">Gen 4</option>
            <option value="5">Gen 5</option>
            <option value="6">Gen 6</option>
            <option value="7">Gen 7</option>
            <option value="8">Gen 8</option>
            <option value="9">Gen 9</option>
          </select>
        </div>
      </div>
    </div>
  </header>
  <main class="container">
    {% block content %}{% endblock %}
  </main>
  <footer class="site-footer">
    <div class="container">
      <p>Data from <a href="https://pokeapi.co/" target="_blank" rel="noopener">PokeAPI</a>. Not affiliated with Nintendo/Game Freak.</p>
    </div>
  </footer>
  <script>
    (function(){
      const btn = document.getElementById('menu-toggle');
      const panel = document.getElementById('mobile-menu');
      if (!btn || !panel) return;
      function closeOnResize(){
        if (window.innerWidth > 768){
          document.body.classList.remove('mobile-open');
          btn.setAttribute('aria-expanded','false');
        }
      }
      btn.addEventListener('click', function(){
        const open = !document.body.classList.contains('mobile-open');
        document.body.classList.toggle('mobile-open', open);
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
      window.addEventListener('resize', closeOnResize);
    })();
  </script>
  <script src="/static/hints_ui.js" defer></script>
  <script src="/static/game.js" defer></script>
</body>
</html>